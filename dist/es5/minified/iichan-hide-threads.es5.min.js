"use strict";!function(){var e="iichan-hidden-thread-placeholder",t=window.location.href.match(/(?:\w+\.\w+\/)(.*)(?=\/)/)[1],n=function(){var e=JSON.parse(window.localStorage.getItem("iichan_hidden_threads")||"{}");return Array.isArray(e)?{}:e},a=function(e,a){var i=n();if(i[t]||(i[t]=[]),a)i[t].includes(e)||i[t].push(e);else{var r=i[t].indexOf(e);if(-1===r)return;i[t].splice(r,1)}!function(e){window.localStorage.setItem("iichan_hidden_threads",JSON.stringify(e))}(i)},i=function(e){if(e){var t=e.querySelector(":scope > label");if(t){var n=document.createElement("span");n.title="Скрыть тред",n.classList.add("iichan-hide-thread-btn"),n.dataset.threadId=e.id,n.addEventListener("click",o),e.insertBefore(n,t.nextSibling)}}},r=function(e){if(e){var t=document.createElement("div");t.title="Скрыть тред",t.classList.add("iichan-hide-thread-btn","reply"),t.dataset.threadId=e.id,t.addEventListener("click",l),e.querySelector(".catthread").appendChild(t)}},d=function(e){var a=!!document.querySelector(".catthreadlist"),d=a?".catthreadlist a":"[id^=thread]",c=e&&e.id.startsWith("thread-")?[e]:(e||document).querySelectorAll(d),l=a?r:i,h=n(),s=!0,u=!1,v=void 0;try{for(var f,y=c[Symbol.iterator]();!(s=(f=y.next()).done);s=!0){var p=f.value;p.id=a?"thread-"+p.title.match(/^#(\d+)\s/)[1]:p.id,l(p),h[t]&&(h[t].includes(p.id)&&o(p.id))}}catch(e){u=!0,v=e}finally{try{s||null==y.return||y.return()}finally{if(u)throw v}}},c=function(e){var t=e.target?e.target.dataset.threadId:e;a(t,!1);var n=document.getElementById(t);if(n){n.classList.remove("iichan-thread-hidden");var i=document.getElementById("iichan-hidden-"+t);i&&i.parentElement.removeChild(i)}},o=function(t){var n=t.target?t.target.dataset.threadId:t;a(n,!0);var i=document.getElementById(n);i&&i.parentNode&&(i.classList.add("iichan-thread-hidden"),!!document.querySelector(".catthreadlist")||function(t){if(t){var n=t.id.split("-").pop(),a=t.querySelector(".filetitle").innerText||t.querySelector("blockquote").innerText;a=a.substr(0,50);var i="iichan-hidden-"+t.id;t.insertAdjacentHTML("beforebegin",'\n    <div class="reply '.concat(e,'" id="').concat(i,'">Тред <a>№').concat(n,"</a> скрыт (").concat(a||"изображение",")</div>\n  "));var r=t.previousElementSibling.querySelector(":scope > a");r.dataset.threadId=t.id,r.addEventListener("click",c)}}(i))},l=function(e){var t=e.target?e.target.dataset.threadId:e,n=t.split("-").pop(),i=document.getElementById("thread-"+n);a(t,i.classList.toggle("iichan-thread-hidden")),e.preventDefault&&e.preventDefault()},h=function(){document.querySelector("#de-main")||(document.querySelector("body.replypage")||(document.head.insertAdjacentHTML("beforeend",'<style type="text/css">\n      .'.concat(e," {\n          pointer-events: none;\n      }\n      \n      .").concat(e," a {\n          cursor: pointer;\n          pointer-events: auto;\n      }\n      \n      .").concat(e,":hover + div,\n      .").concat(e,":hover + div + br {\n          display: block !important;\n      }\n      \n      .").concat(e," + div {\n          display: none;\n      }\n      .").concat(e," + div +  br {\n          display: none;\n      }\n      \n      .").concat("iichan-hide-thread-btn"," {\n          margin-left: 0.2em;\n          cursor: pointer;\n      }\n      \n      .").concat("iichan-hide-thread-btn","::after {\n          content: '[✕]';\n      }\n      \n      .catthreadlist a {\n        position: relative;\n        transition: all .3s ease-in-out;\n      }\n      \n      .catthreadlist .").concat("iichan-thread-hidden"," {\n        opacity: .6;\n      }\n      \n      .catthreadlist .").concat("iichan-thread-hidden",":not(:hover) {\n        opacity: .2;\n        filter: blur(1px);\n      }\n      \n      .catthread:hover .").concat("iichan-hide-thread-btn"," {\n        display: block;\n      }\n      \n      .catthread .").concat("iichan-hide-thread-btn"," {\n        text-decoration: none;\n        position: absolute;\n        top: 0;\n        right: 0;\n        display: none;\n        width: 25px;\n        height: 25px;\n      }\n      \n      .catthreadlist .").concat("iichan-thread-hidden"," .").concat("iichan-hide-thread-btn","::after {\n        content: '[+]';\n      }\n    </style>")),d(),"MutationObserver"in window&&new MutationObserver(function(e){e.forEach(function(e){var t=!0,n=!1,a=void 0;try{for(var i,r=e.addedNodes[Symbol.iterator]();!(t=(i=r.next()).done);t=!0){var c=i.value;if(!c.querySelectorAll)return;d(c)}}catch(e){n=!0,a=e}finally{try{t||null==r.return||r.return()}finally{if(n)throw a}}})}).observe(document.body,{childList:!0,subtree:!0})))};document.body?h():document.addEventListener("DOMContentLoaded",h)}();