try{eval("(()=>{const e={main:{key:\"mainpage\",dummy:\"\",url:\"/cgi-bin/captcha1.pl/b/\"},quick:{key:\"mainpage\",dummy:\"\",url:\"/cgi-bin/captcha1.pl/b/\"}},{quickReplyContainer:n,quickPostformContainer:t}=(()=>{const e=document.createElement(\"table\");return e.insertAdjacentHTML(\"beforeend\",'\\n      <tr>\\n      \\t<td class=\"doubledash\">&gt;&gt;</td>\\n      \\t<td class=\"iichan-postform-container reply\">\\n         <div class=\"theader\">Ответ в тред №<span class=\"iichan-quick-reply-thread\"></span><div class=\"iichan-quick-reply-close-form-btn\" title=\"Закрыть форму\"><svg>\\n          <use class=\"iichan-icon-form-close-use\" xlink:href=\"/extras/icons.svg#iichan-icon-close\" width=\"16\" height=\"16\" viewBox=\"0 0 16 16\"/>\\n        </svg></div></div>\\n        </td>\\n      </tr>\\n      \\n    '),e.id=\"iichan-quick-reply-container\",e.querySelector(\".iichan-quick-reply-close-form-btn\").addEventListener(\"click\",e=>h(null)),{quickReplyContainer:e,quickPostformContainer:e.querySelector(\".iichan-postform-container\")}})(),i=(()=>{let e;return()=>(e||(e=document.getElementById(\"postform\")),e)})(),r=(()=>{let e;return()=>{if(!e){const n=i();(e=n.cloneNode(!0)).id=\"iichan-quick-reply-form\";const r=e.querySelector(\"#captcha\");r&&(r.id=\"iichan-quick-reply-captcha\"),a(e),document.body.classList.contains(\"replypage\")&&(e.addEventListener(\"change\",y),e.addEventListener(\"input\",y)),t.appendChild(e)}return e}})(),c=(()=>{const e=document.createElement(\"input\");return e.setAttribute(\"type\",\"hidden\"),e.setAttribute(\"name\",\"parent\"),e})(),a=e=>{const n=e.querySelector(\"input[name=captcha] + a\");n&&(n.removeAttribute(\"onclick\"),n.addEventListener(\"click\",e=>{s(),e.preventDefault()}))},o=e=>{const{url:n,key:t,dummy:i}=e;return`${n}?key=${t}&dummy=${i}&${Math.random()}`},s=()=>{const n=document.getElementById(\"iichan-quick-reply-captcha\"),t=document.getElementById(\"captcha\"),i=o(e.quick);n&&(n.src=i),t&&(e.quick.key===e.main.key?t.src=i:t.src=o(e.main))},l=n=>{if(n){const t=n.id.substr(\"thread-\".length),i=n.querySelector(\"table:last-child .reply\"),r=i?i.id.substr(\"reply\".length):t;e.quick.key=`res${t}`,e.quick.dummy=r}else e.quick.key=\"mainpage\",e.quick.dummy=\"\";s()},d=(e,t)=>{const i=n.querySelector(\".iichan-quick-reply-thread\");i&&(i.textContent=t||\"\");let r=e.querySelector(\"[name=parent]\");t?(r||(r=c,e.appendChild(r)),r.setAttribute(\"value\",t)):r&&e.removeChild(r)},u=(e,n)=>{let t=e;for(;t&&t!==document&&!t.matches(n);)t=t.parentNode;return t===document?null:t},p=(e,n)=>{const t=e&&e.querySelector(\"[name=nya4]\");t&&(t.focus(),n&&(n=`>>${n}\\n`,t.value.endsWith(n)||(t.value.length&&!t.value.endsWith(\"\\n\")&&(n=\"\\n\"+n),t.setRangeText(n,t.textLength,t.textLength,\"end\"))),document.body.classList.contains(\"replypage\")&&y(t))},h=e=>{const t=r();e&&t.dataset.replyTo!==e.id?e.classList.contains(\"reply\")?(t.dataset.replyTo=e.id,(e=>{const t=r(),i=u(e,\"table\"),c=u(e,\"[id^=thread]\");if(!i||!c)return;const a=c.id.substr(\"thread-\".length),o=e.id.substr(\"reply\".length);i.parentNode.insertBefore(n,i.nextSibling),d(t,a),l(c),p(t,o)})(e)):(t.dataset.replyTo=e.id,(e=>{const t=r(),i=e.querySelector(\"table\"),c=e.id.substr(\"thread-\".length);e.insertBefore(n,i),d(t,c),l(e),p(t,c)})(e)):(t.dataset.replyTo=\"\",n.parentNode&&n.parentNode.removeChild(n))},y=e=>{const n=e instanceof Event?e.target:e,t=r(),c=i(),a=t.contains(n)?c:t,o=t.contains(n)?t:c,s=a[n.name],l=n.type;if(s)if(\"radio\"===l){const e=o[n.name];s.value=e.value}else if(\"checkbox\"===l)s.checked=n.checked;else if(\"file\"===l){const e=n.cloneNode(),t=s.parentElement;t.removeChild(s),t.insertBefore(e,t.firstChild)}else s.value=n.value},m=e=>{let n=e.target;for(;n&&!n.classList.contains(\"iichan-quick-reply-btn\");)n=n.parentElement;if(n){const e=document.getElementById(n.dataset.postId);h(e)}e.preventDefault()},f=e=>{let t=\"\";const c=u(e.target,\".reply\"),a=u(e.target,\"[id^=thread]\");if(c?t=c.id.substr(\"reply\".length):a&&(t=a.id.substr(\"thread-\".length)),t)if(n.parentNode){const e=r();p(e,t)}else if(document.body.classList.contains(\"replypage\")){const e=i();p(e,t)}else{h(c||a)}e.preventDefault()},k=e=>{if(!e)return;const n=e.querySelector(\":scope > .reflink\");if(!n)return;n.insertAdjacentHTML(\"afterend\",`\\n    <div class=\"iichan-quick-reply-btn\" title=\"Быстрый ответ\" data-post-id=\"${e.id}\">\\n      <svg>\\n        <use class=\"iichan-icon-reply-use\" xlink:href=\"/extras/icons.svg#iichan-icon-reply\" width=\"16\" height=\"16\" viewBox=\"0 0 16 16\"/>\\n      </svg>\\n    </div>\\n  `),e.querySelector(\".iichan-quick-reply-btn\").addEventListener(\"click\",m);const t=n.querySelector(\"a\");t&&t.addEventListener(\"click\",f)},g=e=>{const n=(e||document).querySelectorAll(\".reply, [id^=thread]\");for(const e of n)k(e)},b=()=>{if(document.querySelector(\"#de-main\"))return;const n=i();if(!n)return;const t=document.querySelector(\"#captcha\");if(t){const n=t.getAttribute(\"src\"),[i,r,c,a]=n.match(/([^\\?]*)\\?key=(.*)&dummy=(.*)/);e.main.url=r,e.main.key=c,e.main.dummy=a,e.quick.url=r}if(a(n),document.body.classList.contains(\"replypage\")&&(n.addEventListener(\"change\",y),n.addEventListener(\"input\",y)),document.head.insertAdjacentHTML(\"beforeend\",'<style type=\"text/css\">\\n      .iichan-quick-reply-btn {\\n        display: inline-block;\\n        width: 16px;\\n        height: 16px;\\n        vertical-align: text-top;\\n      }\\n      \\n      .iichan-quick-reply-btn > svg {\\n        width: 16px;\\n        height: 16px;\\n      }\\n      \\n      .iichan-quick-reply-btn use {\\n        pointer-events: none;\\n      }\\n      \\n      .iichan-quick-reply-btn {\\n        cursor: pointer;\\n      }\\n      \\n      #iichan-quick-reply-container .rules {\\n        display: none;\\n      }\\n      \\n      #iichan-quick-reply-icons {\\n        display: none;\\n      }\\n      \\n      .iichan-postform-container .theader {\\n        width: auto;\\n      }\\n      \\n      .iichan-quick-reply-close-form-btn {\\n        float: right;\\n        cursor: pointer;\\n        padding: 1px;\\n      }\\n      \\n      .iichan-quick-reply-close-form-btn svg {\\n        width: 16px;\\n        height: 16px;\\n        vertical-align: text-top;\\n      }\\n      \\n      .iichan-quick-reply-close-form-btn use {\\n        pointer-events: none;\\n      }\\n      \\n    </style>'),g(),\"MutationObserver\"in window){new MutationObserver(e=>{e.forEach(e=>{for(const n of e.addedNodes){if(!n.querySelectorAll)return;g(n)}})}).observe(document.body,{childList:!0,subtree:!0})}};document.body?b():document.addEventListener(\"DOMContentLoaded\",b)})();");}catch(e){}