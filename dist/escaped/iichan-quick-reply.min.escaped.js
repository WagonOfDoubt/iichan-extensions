try{eval("(()=>{\"use strict\";const e=\"iichan-quick-reply-btn\",t=\"Быстрый ответ\",n=\"iichan-quick-reply-container\",o=\"iichan-quick-reply-show-form-btn\",{quickReplyContainer,postformContainer}=(()=>{const e=document.createElement(\"table\");e.insertAdjacentHTML(\"beforeend\",`\n          <tr>\n          \\t<td class=\"doubledash\">&gt;&gt;</td>\n          \\t<td class=\"iichan-postform-container reply\"></td>\n          </tr>\n          \n        `),e.id=n;const t=e.querySelector(\".iichan-postform-container\");return{quickReplyContainer:e,postformContainer:t}})(),r=(()=>{const e=document.createElement(\"a\");return e.classList.add(o),e})(),c=(()=>{const e=document.createElement(\"input\");return e.setAttribute(\"type\",\"hidden\"),e.setAttribute(\"name\",\"parent\"),e})(),i=(e,t)=>{let n=e.querySelector(\"[name=parent]\");return t?(n||(n=c,e.appendChild(n)),void n.setAttribute(\"value\",t)):void(n&&e.removeChild(n))},d=(e,t)=>{let n=e;for(;n&&n!==document&&!n.matches(t);)n=n.parentNode;return n===document?null:n},a=e=>{const t=document.querySelector(\"[name=nya4]\");t&&(t.focus(!1),e&&(e=`>>${e}\n`,t.value.endsWith(e)||(t.value.length&&!t.value.endsWith(\"\\n\")&&(e=\"\\n\"+e),t.setRangeText(e,t.textLength,t.textLength,\"end\"))))},s=()=>{const e=document.querySelector(\".postarea\");e&&e.appendChild(r)},u=(e,t)=>{const n=d(t,\"table\"),o=d(t,\"[id^=thread]\");if(n&&o){postformContainer.appendChild(e),n.parentNode.insertBefore(quickReplyContainer,n.nextSibling),s();const r=o.id.substr(\"thread-\".length);i(e,r);const c=t.id.substr(\"reply\".length);a(c)}},l=(e,t)=>{const n=t.querySelector(\"table\");postformContainer.appendChild(e),t.insertBefore(quickReplyContainer,n),s();const o=t.id.substr(\"thread-\".length);i(e,o),a(o)},p=(e,t)=>{const n=document.querySelector(\".postarea\");if(n&&(n.appendChild(e),t&&a()),quickReplyContainer.parentNode&&quickReplyContainer.parentNode.removeChild(quickReplyContainer),r.parentNode&&r.parentNode.removeChild(r),document.body.classList.contains(\"replypage\")){const t=document.querySelector(\"[id^=thread]\"),n=t.id.substr(\"thread-\".length);i(e,n)}else i(e,null)},f=e=>{const t=document.querySelector(\"#postform\");t&&(e?t.dataset.replyTo===e.id?(t.dataset.replyTo=\"\",p(t,!1)):e.classList.contains(\"reply\")?(t.dataset.replyTo=e.id,u(t,e)):(t.dataset.replyTo=e.id,l(t,e)):(t.dataset.replyTo=\"\",p(t,!0)))},m=e=>{const t=e.target,n=document.querySelector(t.dataset.postId);f(n)},h=n=>{if(n){const o=n.querySelector(\":scope > .reflink\");if(o){const r=document.createElement(\"span\");r.title=t,r.classList.add(e),r.dataset.postId=\"#\"+n.id,r.addEventListener(\"click\",m),n.insertBefore(r,o.nextSibling)}}},y=e=>{const t=(e||document).querySelectorAll(\".reply, [id^=thread]\");for(const n of t)h(n)},b=()=>{document.head.insertAdjacentHTML(\"beforeend\",`<style type=\"text/css\">\n        .iichan-quick-reply-btn::after {\n          content: '[▶]';\n        }\n        \n        .replypage .iichan-quick-reply-show-form-btn::after {\n          content: '[Показать форму ответа]';\n        }\n        \n        .iichan-quick-reply-show-form-btn::after {\n          content: '[Создать тред]';\n        }\n        \n        .iichan-quick-reply-show-form-btn,\n        .iichan-quick-reply-btn {\n          cursor: pointer;\n        }\n        \n        #${n} .rules {\n          display: none;\n        }\n        \n      </style>`)},q=()=>{if(!document.querySelector(\"#de-main\")&&(b(),y(),r.addEventListener(\"click\",e=>f()),\"MutationObserver\"in window)){const e=new MutationObserver(e=>{e.forEach(e=>{for(const t of e.addedNodes){if(!t.querySelectorAll)return;y(t)}})});e.observe(document.body,{childList:!0,subtree:!0})}};document.body?q():document.addEventListener(\"DOMContentLoaded\",q)})();");}catch(e){}