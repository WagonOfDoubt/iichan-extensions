try{eval("(()=>{const e={key:\"mainpage\",dummy:\"\",url:\"/cgi-bin/captcha1.pl/b/\"},{quickReplyContainer:t,postformContainer:n}=(()=>{const e=document.createElement(\"table\");return e.insertAdjacentHTML(\"beforeend\",'\\n        <tr>\\n        \\t<td class=\"doubledash\">&gt;&gt;</td>\\n        \\t<td class=\"iichan-postform-container reply\"></td>\\n        </tr>\\n        \\n      '),e.id=\"iichan-quick-reply-container\",{quickReplyContainer:e,postformContainer:e.querySelector(\".iichan-postform-container\")}})(),r=(()=>{const e=document.createElement(\"a\");return e.classList.add(\"iichan-quick-reply-show-form-btn\"),e})(),o=(()=>{const e=document.createElement(\"input\");return e.setAttribute(\"type\",\"hidden\"),e.setAttribute(\"name\",\"parent\"),e})(),c=()=>{const t=document.querySelector(\"#captcha\");if(!t)return;const{url:n,key:r,dummy:o}=e;t.src=`${n}?key=${r}&dummy=${o}&${Math.random()}`},a=t=>{if(t){const n=t.id.substr(\"thread-\".length),r=t.querySelector(\"table:last-child .reply\"),o=r?r.id.substr(\"reply\".length):n;e.key=`res${n}`,e.dummy=o}else e.key=\"mainpage\",e.dummy=\"\";c()},i=(e,t)=>{let n=e.querySelector(\"[name=parent]\");t?(n||(n=o,e.appendChild(n)),n.setAttribute(\"value\",t)):n&&e.removeChild(n)},d=(e,t)=>{let n=e;for(;n&&n!==document&&!n.matches(t);)n=n.parentNode;return n===document?null:n},s=e=>{const t=document.querySelector(\"[name=nya4]\");t&&(t.focus(!1),e&&(e=`>>${e}\\n`,t.value.endsWith(e)||(t.value.length&&!t.value.endsWith(\"\\n\")&&(e=\"\\n\"+e),t.setRangeText(e,t.textLength,t.textLength,\"end\"))))},l=()=>{const e=document.querySelector(\".postarea\");e&&e.appendChild(r)},u=(e,n)=>{const o=document.querySelector(\".postarea\");if(o&&(o.appendChild(e),n&&s()),t.parentNode&&t.parentNode.removeChild(t),r.parentNode&&r.parentNode.removeChild(r),document.body.classList.contains(\"replypage\")){const t=document.querySelector(\"[id^=thread]\"),n=t.id.substr(\"thread-\".length);i(e,n),a(t)}else i(e,null),a()},p=e=>{const r=document.querySelector(\"#postform\");r&&(e?r.dataset.replyTo===e.id?(r.dataset.replyTo=\"\",u(r,!1)):e.classList.contains(\"reply\")?(r.dataset.replyTo=e.id,((e,r)=>{const o=d(r,\"table\"),c=d(r,\"[id^=thread]\");if(!o||!c)return;const u=c.id.substr(\"thread-\".length),p=r.id.substr(\"reply\".length);n.appendChild(e),o.parentNode.insertBefore(t,o.nextSibling),l(),i(e,u),a(c),s(p)})(r,e)):(r.dataset.replyTo=e.id,((e,r)=>{const o=r.querySelector(\"table\"),c=r.id.substr(\"thread-\".length);n.appendChild(e),r.insertBefore(t,o),l(),i(e,c),a(r),s(c)})(r,e)):(r.dataset.replyTo=\"\",u(r,!0)))},y=e=>{const t=e.target,n=document.querySelector(t.dataset.postId);p(n)},m=e=>{if(!e)return;const t=e.querySelector(\":scope > .reflink\");if(!t)return;const n=document.createElement(\"span\");n.title=\"Быстрый ответ\",n.classList.add(\"iichan-quick-reply-btn\"),n.dataset.postId=\"#\"+e.id,n.addEventListener(\"click\",y),e.insertBefore(n,t.nextSibling)},h=e=>{const t=(e||document).querySelectorAll(\".reply, [id^=thread]\");for(const e of t)m(e)},b=()=>{if(document.querySelector(\"#de-main\"))return;const t=document.querySelector(\"#captcha\");t&&(e.url=t.getAttribute(\"src\").match(/[^\\?]*/)[0]);const n=document.querySelector(\"input[name=captcha] + a\");if(n&&(n.removeAttribute(\"onclick\"),n.addEventListener(\"click\",e=>{c(),e.preventDefault()})),document.body.classList.contains(\"replypage\")){const e=document.querySelector(\"[id^=thread]\");a(e)}else a();if(document.head.insertAdjacentHTML(\"beforeend\",\"<style type=\\\"text/css\\\">\\n      .iichan-quick-reply-btn::after {\\n        content: '[▶]';\\n      }\\n      \\n      .replypage .iichan-quick-reply-show-form-btn::after {\\n        content: '[Показать форму ответа]';\\n      }\\n      \\n      .iichan-quick-reply-show-form-btn::after {\\n        content: '[Создать тред]';\\n      }\\n      \\n      .iichan-quick-reply-show-form-btn,\\n      .iichan-quick-reply-btn {\\n        cursor: pointer;\\n      }\\n      \\n      #iichan-quick-reply-container .rules {\\n        display: none;\\n      }\\n      \\n    </style>\"),h(),r.addEventListener(\"click\",e=>{p(),e.preventDefault()}),\"MutationObserver\"in window){new MutationObserver(e=>{e.forEach(e=>{for(const t of e.addedNodes){if(!t.querySelectorAll)return;h(t)}})}).observe(document.body,{childList:!0,subtree:!0})}};document.body?b():document.addEventListener(\"DOMContentLoaded\",b)})();");}catch(e){}