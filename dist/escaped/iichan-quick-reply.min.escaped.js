try{eval("(()=>{const e={key:\"mainpage\",dummy:\"\",url:\"/cgi-bin/captcha1.pl/b/\"},{quickReplyContainer:t,postformContainer:n}=(()=>{const e=document.createElement(\"table\");return e.insertAdjacentHTML(\"beforeend\",'\\n        <tr>\\n        \\t<td class=\"doubledash\">&gt;&gt;</td>\\n        \\t<td class=\"iichan-postform-container reply\"></td>\\n        </tr>\\n        \\n      '),e.id=\"iichan-quick-reply-container\",{quickReplyContainer:e,postformContainer:e.querySelector(\".iichan-postform-container\")}})(),r=(()=>{const e=document.createElement(\"a\");return e.classList.add(\"iichan-quick-reply-show-form-btn\"),e})(),i=(()=>{const e=document.createElement(\"input\");return e.setAttribute(\"type\",\"hidden\"),e.setAttribute(\"name\",\"parent\"),e})(),o=()=>{const t=document.querySelector(\"#captcha\");if(!t)return;const{url:n,key:r,dummy:i}=e;t.src=`${n}?key=${r}&dummy=${i}&${Math.random()}`},c=t=>{if(t){const n=t.id.substr(\"thread-\".length),r=t.querySelector(\"table:last-child .reply\"),i=r?r.id.substr(\"reply\".length):n;e.key=`res${n}`,e.dummy=i}else e.key=\"mainpage\",e.dummy=\"\";o()},a=(e,t)=>{let n=e.querySelector(\"[name=parent]\");t?(n||(n=i,e.appendChild(n)),n.setAttribute(\"value\",t)):n&&e.removeChild(n)},d=(e,t)=>{let n=e;for(;n&&n!==document&&!n.matches(t);)n=n.parentNode;return n===document?null:n},l=e=>{const t=document.querySelector(\"[name=nya4]\");t&&(t.focus(!1),e&&(e=`>>${e}\\n`,t.value.endsWith(e)||(t.value.length&&!t.value.endsWith(\"\\n\")&&(e=\"\\n\"+e),t.setRangeText(e,t.textLength,t.textLength,\"end\"))))},s=()=>{const e=document.querySelector(\".postarea\");e&&e.appendChild(r)},u=(e,n)=>{const i=document.querySelector(\".postarea\");if(i&&(i.appendChild(e),n&&l()),t.parentNode&&t.parentNode.removeChild(t),r.parentNode&&r.parentNode.removeChild(r),document.body.classList.contains(\"replypage\")){const t=document.querySelector(\"[id^=thread]\"),n=t.id.substr(\"thread-\".length);a(e,n),c(t)}else a(e,null),c()},p=e=>{const r=document.querySelector(\"#postform\");r&&(e?r.dataset.replyTo===e.id?(r.dataset.replyTo=\"\",u(r,!1)):e.classList.contains(\"reply\")?(r.dataset.replyTo=e.id,((e,r)=>{const i=d(r,\"table\"),o=d(r,\"[id^=thread]\");if(!i||!o)return;const u=o.id.substr(\"thread-\".length),p=r.id.substr(\"reply\".length);n.appendChild(e),i.parentNode.insertBefore(t,i.nextSibling),s(),a(e,u),c(o),l(p)})(r,e)):(r.dataset.replyTo=e.id,((e,r)=>{const i=r.querySelector(\"table\"),o=r.id.substr(\"thread-\".length);n.appendChild(e),r.insertBefore(t,i),s(),a(e,o),c(r),l(o)})(r,e)):(r.dataset.replyTo=\"\",u(r,!0)))},h=e=>{let t=e.target;for(;t&&!t.classList.contains(\"iichan-quick-reply-btn\");)t=t.parentElement;if(t){const e=document.getElementById(t.dataset.postId);p(e)}e.preventDefault()},y=e=>{if(!e)return;const t=e.querySelector(\":scope > .reflink\");t&&(t.insertAdjacentHTML(\"afterend\",`\\n    <div class=\"iichan-quick-reply-btn\" title=\"Быстрый ответ\" data-post-id=\"${e.id}\">\\n      <svg>\\n        <use class=\"iichan-icon-reply-use\" xlink:href=\"#iichan-icon-reply\" width=\"16\" height=\"16\" viewBox=\"0 0 16 16\"/>\\n      </svg>\\n    </div>\\n  `),e.querySelector(\".iichan-quick-reply-btn\").addEventListener(\"click\",h))},m=e=>{const t=(e||document).querySelectorAll(\".reply, [id^=thread]\");for(const e of t)y(e)},b=()=>{if(document.querySelector(\"#de-main\"))return;const t=document.querySelector(\"#captcha\");t&&(e.url=t.getAttribute(\"src\").match(/[^\\?]*/)[0]);const n=document.querySelector(\"input[name=captcha] + a\");if(n&&(n.removeAttribute(\"onclick\"),n.addEventListener(\"click\",e=>{o(),e.preventDefault()})),document.body.classList.contains(\"replypage\")){const e=document.querySelector(\"[id^=thread]\");c(e)}else c();if(document.head.insertAdjacentHTML(\"beforeend\",\"<style type=\\\"text/css\\\">\\n      .iichan-quick-reply-btn {\\n        display: inline-block;\\n        width: 16px;\\n        height: 16px;\\n        vertical-align: text-top;\\n      }\\n      \\n      .iichan-quick-reply-btn > svg {\\n        width: 16px;\\n        height: 16px;\\n      }\\n      \\n      .iichan-quick-reply-btn use {\\n        pointer-events: none;\\n      }\\n      \\n      .replypage .iichan-quick-reply-show-form-btn::after {\\n        content: '[Показать форму ответа]';\\n      }\\n      \\n      .iichan-quick-reply-show-form-btn::after {\\n        content: '[Создать тред]';\\n      }\\n      \\n      .iichan-quick-reply-show-form-btn,\\n      .iichan-quick-reply-btn {\\n        cursor: pointer;\\n      }\\n      \\n      #iichan-quick-reply-container .rules {\\n        display: none;\\n      }\\n      \\n    </style>\"),document.body.insertAdjacentHTML(\"beforeend\",'<div id=\"iichan-quick-reply-icons\">\\n    \\n    <svg xmlns=\"http://www.w3.org/2000/svg\">\\n      <symbol id=\"iichan-icon-reply\" width=\"16\" height=\"16\" viewBox=\"0 0 16 16\">\\n        <path\\n          fill=\"currentcolor\"\\n          d=\"M 8,0.98745 A 7.0133929,5.9117254 0 0 0 0.986328,6.89859 7.0133929,5.9117254 0 0 0 3.037109,11.07043 L 1.835937,15.01255 6.230469,12.61078 A 7.0133929,5.9117254 0 0 0 8,12.80973 7.0133929,5.9117254 0 0 0 15.013672,6.89859 7.0133929,5.9117254 0 0 0 8,0.98745 Z\"/>\\n      </symbol>\\n    </svg>\\n  \\n  </div>'),m(),r.addEventListener(\"click\",e=>{p(),e.preventDefault()}),\"MutationObserver\"in window){new MutationObserver(e=>{e.forEach(e=>{for(const t of e.addedNodes){if(!t.querySelectorAll)return;m(t)}})}).observe(document.body,{childList:!0,subtree:!0})}};document.body?b():document.addEventListener(\"DOMContentLoaded\",b)})();");}catch(e){}