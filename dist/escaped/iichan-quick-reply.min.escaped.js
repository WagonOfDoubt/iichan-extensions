try{eval("(()=>{\"use strict\";const e=\"iichan-quick-reply-btn\",t=\"Быстрый ответ\",n=\"iichan-quick-reply-container\",o=\"iichan-quick-reply-show-form-btn\",r=\"/cgi-bin/captcha1.pl\",c=window.location.href.match(/(?:\\w+\\.\\w+\\/)([^\\/]*)(?=\\/)/)[1],i={key:\"mainpage\",dummy:\"\",board:c},{quickReplyContainer,postformContainer}=(()=>{const e=document.createElement(\"table\");e.insertAdjacentHTML(\"beforeend\",`\n          <tr>\n          \\t<td class=\"doubledash\">&gt;&gt;</td>\n          \\t<td class=\"iichan-postform-container reply\"></td>\n          </tr>\n          \n        `),e.id=n;const t=e.querySelector(\".iichan-postform-container\");return{quickReplyContainer:e,postformContainer:t}})(),d=(()=>{const e=document.createElement(\"a\");return e.classList.add(o),e})(),a=(()=>{const e=document.createElement(\"input\");return e.setAttribute(\"type\",\"hidden\"),e.setAttribute(\"name\",\"parent\"),e})(),s=()=>{const e=document.querySelector(\"#captcha\");if(e){const{key,dummy,board}=i;e.src=`${r}/${board}/?key=${key}&dummy=${dummy}&${Math.random()}`}},u=e=>{if(e){const t=e.id.substr(\"thread-\".length),n=e.querySelector(\"table:last-child .reply\"),o=n?n.id.substr(\"reply\".length):t;i.key=`res${t}`,i.dummy=o}else i.key=\"mainpage\",i.dummy=\"\";s()},l=(e,t)=>{let n=e.querySelector(\"[name=parent]\");return t?(n||(n=a,e.appendChild(n)),void n.setAttribute(\"value\",t)):void(n&&e.removeChild(n))},p=(e,t)=>{let n=e;for(;n&&n!==document&&!n.matches(t);)n=n.parentNode;return n===document?null:n},f=e=>{const t=document.querySelector(\"[name=nya4]\");t&&(t.focus(!1),e&&(e=`>>${e}\n`,t.value.endsWith(e)||(t.value.length&&!t.value.endsWith(\"\\n\")&&(e=\"\\n\"+e),t.setRangeText(e,t.textLength,t.textLength,\"end\"))))},m=()=>{const e=document.querySelector(\".postarea\");e&&e.appendChild(d)},y=(e,t)=>{const n=p(t,\"table\"),o=p(t,\"[id^=thread]\");if(n&&o){const r=o.id.substr(\"thread-\".length),c=t.id.substr(\"reply\".length);postformContainer.appendChild(e),n.parentNode.insertBefore(quickReplyContainer,n.nextSibling),m(),l(e,r),u(o),f(c)}},h=(e,t)=>{const n=t.querySelector(\"table\"),o=t.id.substr(\"thread-\".length);postformContainer.appendChild(e),t.insertBefore(quickReplyContainer,n),m(),l(e,o),u(t),f(o)},b=(e,t)=>{const n=document.querySelector(\".postarea\");if(n&&(n.appendChild(e),t&&f()),quickReplyContainer.parentNode&&quickReplyContainer.parentNode.removeChild(quickReplyContainer),d.parentNode&&d.parentNode.removeChild(d),document.body.classList.contains(\"replypage\")){const t=document.querySelector(\"[id^=thread]\"),n=t.id.substr(\"thread-\".length);l(e,n),u(t)}else l(e,null),u()},q=e=>{const t=document.querySelector(\"#postform\");t&&(e?t.dataset.replyTo===e.id?(t.dataset.replyTo=\"\",b(t,!1)):e.classList.contains(\"reply\")?(t.dataset.replyTo=e.id,y(t,e)):(t.dataset.replyTo=e.id,h(t,e)):(t.dataset.replyTo=\"\",b(t,!0)))},v=e=>{const t=e.target,n=document.querySelector(t.dataset.postId);q(n)},S=n=>{if(n){const o=n.querySelector(\":scope > .reflink\");if(o){const r=document.createElement(\"span\");r.title=t,r.classList.add(e),r.dataset.postId=\"#\"+n.id,r.addEventListener(\"click\",v),n.insertBefore(r,o.nextSibling)}}},g=e=>{const t=(e||document).querySelectorAll(\".reply, [id^=thread]\");for(const n of t)S(n)},L=()=>{document.head.insertAdjacentHTML(\"beforeend\",`<style type=\"text/css\">\n        .iichan-quick-reply-btn::after {\n          content: '[▶]';\n        }\n        \n        .replypage .iichan-quick-reply-show-form-btn::after {\n          content: '[Показать форму ответа]';\n        }\n        \n        .iichan-quick-reply-show-form-btn::after {\n          content: '[Создать тред]';\n        }\n        \n        .iichan-quick-reply-show-form-btn,\n        .iichan-quick-reply-btn {\n          cursor: pointer;\n        }\n        \n        #${n} .rules {\n          display: none;\n        }\n        \n      </style>`)},k=()=>{if(!document.querySelector(\"#de-main\")){const e=document.querySelector(\"input[name=captcha] + a\");if(e&&(e.removeAttribute(\"onclick\"),e.addEventListener(\"click\",e=>{s(),e.preventDefault()})),document.body.classList.contains(\"replypage\")){const e=document.querySelector(\"[id^=thread]\");u(e)}else u();if(L(),g(),d.addEventListener(\"click\",e=>{q(),e.preventDefault()}),\"MutationObserver\"in window){const e=new MutationObserver(e=>{e.forEach(e=>{for(const t of e.addedNodes){if(!t.querySelectorAll)return;g(t)}})});e.observe(document.body,{childList:!0,subtree:!0})}}};document.body?k():document.addEventListener(\"DOMContentLoaded\",k)})();");}catch(e){}